proxy_cache_path /home/miguel/Escritorio/develop/mixerjs/cache/nodecache levels=1:2 keys_zone=example:10m;

upstream mynodeapp {
    server 127.0.0.1:3000;
        keepalive 64;
}

server {
        listen 9000;
        server_name .myawsomedomian.com;
        access_log /var/log/nginx/mynodeapp.log;

        location / {
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header X-Forwarded-Proto $scheme;                             
                proxy_set_header Host $http_host;
                proxy_set_header X-NginX-Proxy true;
                proxy_set_header Upgrade $http_upgrade;
                proxy_set_header Connection "upgrade";
                proxy_pass http://127.0.0.1:3000;
                proxy_redirect off;
                proxy_http_version 1.1;
#		proxy_cache             example;
#       	proxy_cache_valid       200 1d;
#		add_header X-Cached $upstream_cache_status;
#	      	add_header X-Time $request_time;
#		proxy_cache_valid any 10s;
        }
	
	location /yourapi {

	    proxy_cache example;
	    proxy_cache_valid 200 1d;
	    proxy_ignore_headers X-Accel-Expires Expires Cache-Control;
	    add_header X-Cached $upstream_cache_status;	
	    add_header X-Time $request_time;	
	    proxy_pass http://127.0.0.1:3000;
    }
}
